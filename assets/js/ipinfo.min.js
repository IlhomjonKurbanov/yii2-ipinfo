/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2015
 * @version 1.0.0
 *
 * Krajee IP Information fetcher plugin using PHP API from hostip.info. The plugin is built to work with
 * `kartik-v/yii2-ipinfo` extension. The plugin refreshes IP information via AJAX on document load.
 *
 * @see http://api.hostip.info
 *
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){"use strict";var n=function(n,e){var a=this;a.$element=t(n),a.init(e)};n.prototype={constructor:n,init:function(n){var e=this,a=e.$element;t.each(n,function(t,n){e[t]=n}),t.ajax({url:e.url,type:"GET",dataType:"json",data:e.params,beforeSend:function(t){a.trigger("beforesend.kvipinfo",[t]).html(e.loadingData)},success:function(n,r,o){var i,c,d=n,s="";a.trigger("success.kvipinfo",[n,r,o]),d&&"XX"!==d.country_code?(t.each(e.fields,function(t,n){void 0!==d[n]&&(s+="<tr><th>"+e.defaultFields[n]+"</th><td>"+d[n]+"</td></tr>\n")}),s?(i=t(document.createElement("table")).attr(e.contentOptions).append(s),c=t(document.createElement("div")).append(i).append(e.credits),a.html(c.html()),c.remove()):a.html(e.noData+"\n"+e.credits)):a.html(e.noData+"\n"+e.credits)},error:function(t,n,r){a.html(e.errorData+"\n"+e.credits),a.trigger("error.kvipinfo",[t,n,r])}})}},t.fn.kvIpInfo=function(e){var a=Array.apply(null,arguments);return a.shift(),this.each(function(){var r,o=t(this),i=o.data("kvIpInfo"),c="object"==typeof e&&e;i||(r=t.extend({},t.fn.kvIpInfo.defaults),i=new n(this,t.extend(r,c,o.data())),o.data("kvIpInfo",i)),"string"==typeof e&&i[e].apply(i,a)})},t.fn.kvIpInfo.defaults={fields:[],defaultFields:{},url:"",params:{},credits:"",contentOptions:{},noData:"",errorData:"",loadingData:""},t.fn.kvIpInfo.Constructor=n}(window.jQuery);